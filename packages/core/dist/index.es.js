function S(t,e,n=!1){var o;const r="string"!=typeof e?null==(o=null==e?void 0:e.selector)?void 0:o.value:"";if(r){if(r.startsWith("&")){const e=null==r?void 0:r.replace("&",":scope");return n?t.querySelector(e):t.querySelectorAll(e)}return r}return t}function $(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof HTMLElement)}function W(t,...e){if(!e.length)return t;const n=e.shift();if($(t)&&$(n))for(const e in n)$(n[e])?(t[e]||Object.assign(t,{[e]:{}}),W(t[e],n[e])):Object.assign(t,{[e]:n[e]});return e.length?W(t,...e):t}function q(t){const e=t.match(/^\[([^\]]+)]:(.*)/);return e?{content:e[1],restOfString:e[2]}:null}function x(t,e,n){if("string"!=typeof t)return t;const o=t.replace(/^\[|]$/g,"").replaceAll("_"," ");return o.startsWith("&")?S(e,t,["trigger"].includes(n)):"true"===o||"false"===o?"true"===o:isNaN(Number(o))?o:o.includes(".")?parseFloat(o):parseInt(o,10)}function N(t,e=!1,n){const o={};return t.split(" ").forEach((t=>{var r;const i=q(t);i&&(t=i.restOfString,o.selector={},o.selector.value=i.content);const l=t.split(":").filter((t=>!t.includes("@"))),[s,c]=l;if(!c&&e){const e=t.split("-"),r=e[0],i=e[1];if(!r||!i)return;return void(o[r]=x(i,n,r))}if("tl"===s&&c.startsWith("["))return void(o.tl={value:null==(r=q(c+":"))?void 0:r.content});if(!c)return;const a=c.split("|");o[s]||(o[s]={}),a.forEach((t=>{if(!t)return;let[e,r]=t.split(/-(.+)/);r=x(r,n,e);const i=e.split(".");let l=o[s];i.forEach(((t,e)=>{e===i.length-1?l[t]=r:(l[t]||(l[t]={}),l=l[t])}))}))})),o}function F(t){var e;if(null==(e=t.gsap)||!e.core)throw new Error("GSAP not found");const{gsap:{core:n},...o}=t,r=W({dataAttribute:"data-animate",element:document,breakpoints:{default:"(min-width: 1px)"}},o),i=r.breakpoints.default,l=r.breakpoints,s=[],c=[],a=new Map,u=t=>(t.getAttribute(d())||"").trim(),f=(t=r.element)=>t.querySelectorAll(d(!0)),d=(t=!1)=>`${t?"[":""}${r.dataAttribute}${t?"]":""}`;(function(){const t=[],e=f(),n=t=>"tl"===t||t.includes("tl/")||t.endsWith(":tl");e.forEach((e=>{const o=u(e),s=o.split(" ");if(s.some((t=>n(t)))){const a=function(t){const e=t.match(/(?:@(\w+):)?tl(?:\/(\w+))?/);if(e){const t=e[1],n={id:e[2]??"",matchMedia:i};if(t){if(null==l||!l[t])return null;n.matchMedia=l[t]}return n}return null}(o),u=[];[...f(e),...null!=a&&a.id?document.querySelectorAll(`[${r.dataAttribute}*="tl:${a.id}"]`):[]].forEach((t=>{u.push(t)}));const d=N(s.filter((t=>!n(t))).join(" "),!0,e);return t.push(e),void c.push({id:(null==a?void 0:a.id)||Math.random().toString(36).substring(2,15),data:d,matchMedia:(null==a?void 0:a.matchMedia)||i,elements:u})}})),e.forEach((e=>{var n;if(t.includes(e))return;const o=null==(n=c.find((t=>t.elements.some((t=>t===e))&&t.matchMedia)))?void 0:n.matchMedia;s.push(...Object.entries(function(t){const e={};return t.split(" ").forEach((t=>{const n=t.match(/@(\w+):/);if(!n)return e[i]||(e[i]=[]),void e[i].push(t);const o=n[1];null!=l&&l[o]&&(e[l[o]]||(e[l[o]]=[]),e[l[o]].push(t.replace(n[0],"")))})),e}(u(e))).map((([t,n])=>({matchMedia:t??o,element:e,data:N(n.join(" "),!1,e)}))))})),s.forEach((t=>{a.has(t.element)||a.set(t.element,{});const e={[t.matchMedia]:t.data};a.set(t.element,{...a.get(t.element),...e})})),console.log("matchMedias:",l),console.log("timelines:",c),console.log("elements:",s),console.log("animations",a)})(),n.matchMedia().add(Object.fromEntries(Object.values({[i]:i,...l||{}}).map((t=>[t,t]))),(t=>{const e=[];c.forEach((t=>{const o=n.timeline(t.data||{});e.push({elements:t.elements,timeline:o})})),a.forEach(((o,r)=>{var i;let l={};Object.entries(o).forEach((([e,n])=>{var o;null!=(o=t.conditions)&&o[e]&&(l=W(l,n))}));const s=null==(i=e.find((({elements:t})=>t.includes(r))))?void 0:i.timeline;((t,e,o)=>{var r;const i=e.tl?null==(r=Object.values(e.tl))?void 0:r[0]:void 0;if(e.to&&e.from)o?o.fromTo(S(t,e),e.from,e.to,i):n.fromTo(S(t,e),e.from,e.to);else if(e.to||e.from){const r=e.to?"to":"from";o?o[r](S(t,e),e[r],i):n[r](S(t,e),e[r])}})(r,l,s)}))}))}export{F as glaze};